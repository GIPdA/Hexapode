<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Hexapode: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Hexapode
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Mini projet d&#39;√©tude</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Hexapode Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Mini-projet hexapode</p>
<p>/!\ Projet non fonctionnel</p>
<h2>Cahier des charges</h2>
<p>Nous sommes en charge du d√©veloppement du firmware d'un robot hexapode, bas√© sur FreeRTOS. Le robot sera pilot√© via une liaison s√©rie sans fil type ZigBee.</p>
<h4>M√©canique</h4>
<p>Le robot hexapode dispose de 6 pattes en 2 rang√©es, chaque patte est articul√©e en trois points via 3 servomoteurs classiques de mod√©lisme. √Ä cela s'ajoute une tourelle 2 axes sur l'avant √©quip√©e d'un t√©l√©m√®tre infrarouge et d'une cam√©ra CMUCAM2. De plus, chaque patte poss√®de un contact TOR au bout du pied.</p>
<h4>√âlectronique</h4>
<p>La cible est un LPC17xx auquel sont connect√©s directement tous les √©l√©ments du robot : contacts TOR des pieds, servomoteurs, t√©l√©m√®tre, cam√©ra, etc.</p>
<h4>Firmware</h4>
<p>Fonctionnalit√©s:</p>
<ul>
<li>Pilotage √† partir d'un terminal s√©rie standard<ul>
<li>Utilisation simple via des commandes type "AT" d√©finies dans le manuel utilisateur</li>
</ul>
</li>
<li>Affichage des informations de contact des pieds<ul>
<li>Envoi automatique de l'√©tat sur la la liaison s√©rie (commande AT)</li>
</ul>
</li>
<li>Affichage des informations de la t√™te chercheuse<ul>
<li>√Ä d√©finir</li>
</ul>
</li>
</ul>
<h4>Contraintes de d√©veloppement</h4>
<ul>
<li>Utilisation de git</li>
<li>Utilisation de Keil/RealView</li>
<li>Documentation du code avec une syntaxe compatible doxygen</li>
<li>R√©daction d'un manuel utilisateur</li>
</ul>
<h2>Fonctionnement global</h2>
<p>Le syst√®me est architectur√© autour de t√¢ches gatekeeper g√©rant le mat√©riel, de t√¢ches de contr√¥le et un interpr√©teur. Cet interpr√©teur est la passerelle entre le robot et le "monde ext√©rieur" et parle "actions" c√¥t√© robot et "commandes AT" de l'autre. Chaque t√¢che √©coute des actions particuli√®res et en √©met vers l'interpr√©teur. Charge √† l'interpr√©teur de renvoyer les actions vers d'autres t√¢ches ou de convertir ces actions en commande AT et inversement et si n√©cessaire. Les t√¢ches gatekeeper n'√©mettent pas d'actions mais peuvent en √©couter (configuration par ex.).</p>
<p>Une action est une structure de type Action qui contient un identifiant d'action destin√© √† reconnaitre le type de donn√©e associ√©e. Cet ID permet √©galement de transf√©rer l'action aux t√¢ches qui l'√©coutent (via des queues FreeRTOS).</p>
<p>Action { ActionID xID; void *pvData; }</p>
<h2>Interpr√©teur</h2>
<p>L'interpr√©teur :</p>
<ul>
<li>converti les commande AT en actions</li>
<li>√©coute les actions √©mises par les t√¢ches de contr√¥le (Queue)</li>
<li>renvoi les actions re√ßues vers d'autres t√¢ches qui les √©coutent (vers Queues)</li>
<li>converti les actions en commandes AT si n√©cessaire</li>
</ul>
<p>Interface : ATComCom (voir t√¢ches gatekeeper)</p>
<ul>
<li>Entr√©e : FIFO (Queue)<ul>
<li>Type de donn√©e : Action</li>
</ul>
</li>
<li>Sortie : aucune</li>
</ul>
<h3>T√¢ches gatekeeper</h3>
<p>Les t√¢ches gatekeeper g√®rent le mat√©riel. Elle peuvent √©couter des actions mais pas en √©mettre. Chaque t√¢che met une donn√©e √† disposition des autres t√¢ches de fa√ßon s√©curis√©e (mutex, s√©maphore ou queue).</p>
<h4>T√¢che: Interface de communication (ATComCom [AT Commands Communication])</h4>
<p>T√¢che en charge de g√©rer la liaison s√©rie et de transf√©rer les commandes AT.</p>
<ul>
<li>Hardware : UART (LPCOpen UART)</li>
<li>Entr√©e : FIFO (Queue)<ul>
<li>Type de donn√©e : structure xATCommand</li>
</ul>
</li>
<li>Sortie : FIFO (Queue)<ul>
<li>Type de donn√©e : structure xATCommand</li>
</ul>
</li>
</ul>
<h4>T√¢che: T√©l√©m√®tre infrarouge</h4>
<p>T√¢che en charge de g√©rer le t√©l√©m√®tre infrarouge. Lit la tension de sortie du Sharp pour la convertir en distance. La conversion est effectu√©e √† intervalles r√©guli√®res.</p>
<ul>
<li>Hardware : ADC (LPCOpen ADC)</li>
<li>Entr√©e : auncune</li>
<li>Sortie : distance en cm<ul>
<li>Type de donn√©e : entier (8 ou 16 bits)</li>
<li>S√©curit√© : Mutex</li>
</ul>
</li>
</ul>
<h4>T√¢che: Contacts TOR (pieds)</h4>
<p>T√¢che en charge de g√©rer l'√©tat des contacts des pieds. (mode pooling ou via interruptions)</p>
<ul>
<li>Hardware : GPIO (LPCOpen GPIO)</li>
<li>Entr√©e : aucune</li>
<li>Sortie : champ de bit<ul>
<li>Type de donn√©e : entier (32 bits)</li>
<li>S√©curit√© : Mutex</li>
</ul>
</li>
</ul>
<h3>T√¢ches de contr√¥le</h3>
<h4>T√¢che: CMUcam</h4>
<p>T√¢che en charge de g√©rer la CMUcam.</p>
<ul>
<li>Interface : CMUcom (interface de comm avec la CMUcam)</li>
<li>Entr√©e : Action CMUcamIn</li>
<li>Sortie : Action CMUcamOut</li>
</ul>
<h4>T√¢che: ArmControl</h4>
<p>T√¢che en charge de g√©rer les mouvements des pattes de l'hexapode via les servomoteurs (interface de haut niveau).</p>
<ul>
<li>Interface : ServoDriver (interface de pilotage des servomoteurs)</li>
<li>Entr√©e : Action ArmMovement</li>
<li>Sortie : Action ArmStatus</li>
</ul>
<h4>T√¢che: HeadControl</h4>
<p>T√¢che en charge de g√©rer les mouvements de la t√™te supportant la CMUcam et le capteur de distance (interface de haut niveau).</p>
<ul>
<li>Interface : ServoDriver (interface de pilotage des servomoteurs)</li>
<li>Entr√©e : Action HeadMovement</li>
<li>Sortie : Action ArmStatus</li>
</ul>
<h4>T√¢che: Movement</h4>
<p>T√¢che permettant de contr√¥ler les mouvements de l'hexapode de fa√ßon simple (avancer, tourner, etc). Coordonne les mouvements des pattes pour g√©n√©rer des mouvements coh√©rents.</p>
<ul>
<li>Interface : ArmControl</li>
<li>Entr√©e : Action Movement</li>
<li>Sortie : Action MovementStatus</li>
</ul>
<h3>Librairies</h3>
<p>Les librairies sont cr√©√©es pour contr√¥ler le hardware. Ce ne sont pas des t√¢ches et ne doivent pas en d√©pendre.</p>
<h4>Librairie : contr√¥le servomoteurs (ServoDriver)</h4>
<p>Permet de contr√¥ler les servomoteurs. Le module PWM1 est utilis√© pour g√©n√©rer les 20 signaux avec une p√©riode de 21ms et une pr√©cision √† la microseconde. Voir le fichier <a class="el" href="servodriver_8h.html" title="Librairie gÈrant 20 sorties servomoteurs. Les signaux sont gÈnÈrÈs avec le module PWM. Le temps haut est de...">servodriver.h</a> pour les d√©tails sur son fonctionnement.</p>
<h4>Librairie : interface TOR</h4>
<p>La librairie TOR permet de r√©cup√©rer l'√©tat des capteurs TOR des pieds de l'hexapode.</p>
<h4>Librairie : interface Sharp</h4>
<p>La librairie IR_Sharp g√®re le ou les capteurs IR Sharp du robot. Elle permet de r√©cup√©rer la distance en centim√®tres. /!\ Seul le canal 0 est fonctionnel</p>
<h4>Librairie : interface CMUcam (CMUcom)</h4>
<p>Le portage de la librairie Arduino pour la CMUcam4 √©tait pr√©vu, mais devant la masse de travail il a √©t√© abandonn√©. Une m√©thode pour le portage consiste √† effectuer un wrapper de CMUcom4 pour LPCOpen, mais des probl√®mes se posent en raison de l'architecture de l'interface UART de LPCOpen qui ne s'y pr√™te pas vraiment. Autre solution : porter CMUcam4.c/.h pour utiliser LPCOpen. 2000 lignes de code √† analyser. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jan 6 2014 23:24:43 for Hexapode by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
